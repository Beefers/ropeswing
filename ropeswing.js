"use strict";(()=>{var Os=Object.defineProperty;var ar=(t,e)=>{for(var r in e)Os(t,r,{get:e[r],enumerable:!0})};var pr=["a","b","i"],Q=new Map;function ur(t,e,r,s,o){let n=Q.get(e)?.[t];if(!n)return o?Reflect.construct(e[t],r,s):e[t].apply(s,r);for(let c of n.b.values()){let i=c.call(s,r);Array.isArray(i)&&(r=i)}let f=[...n.i.values()].reduce((c,i)=>(...l)=>i.call(s,l,c),(...c)=>o?Reflect.construct(n.o,c,s):n.o.apply(s,c))(...r);for(let c of n.a.values())f=c.call(s,r,f)??f;return f}function mr(t,e,r,s){let o=Q.get(t),n=o?.[e];return n?.[s].has(r)?(n[s].delete(r),pr.every(f=>n[f].size===0)&&(Reflect.defineProperty(t,e,{value:n.o,writable:!0,configurable:!0})||(t[e]=n.o),delete o[e]),Object.keys(o).length==0&&Q.delete(t),!0):!1}var zt=t=>(e,r,s,o=!1)=>{if(typeof r[e]!="function")throw new Error(`${e} is not a function in ${r.constructor.name}`);Q.has(r)||Q.set(r,{});let n=Q.get(r);if(!n[e]){let i=r[e];n[e]={o:i,b:new Map,i:new Map,a:new Map};let l=(p,d,u)=>{let h=ur(e,r,d,p,u);return o&&c(),h},m=new Proxy(i,{apply:(p,d,u)=>l(d,u,!1),construct:(p,d)=>l(i,d,!0),get:(p,d,u)=>d=="toString"?i.toString.bind(i):Reflect.get(p,d,u)});Reflect.defineProperty(r,e,{value:m,configurable:!0,writable:!0})||(r[e]=m)}let f=Symbol(),c=()=>mr(r,e,f,t);return n[e][t].set(f,s),c};var dr=zt("b"),hr=zt("i"),Jo=zt("a");var Ee={};ar(Ee,{clear:()=>ys,typewrite:()=>ws,write:()=>Ae,writeLine:()=>ut});var de={};ar(de,{timer:()=>me});var me=t=>new Promise(e=>setTimeout(e,t));var he=document.getElementById("convga");if(!he)throw new Error("Failed to find VGA console element - are we on the right site?");var ys=()=>he.innerHTML="",Ae=(...t)=>he.textContent+=t.join(" "),ut=(...t)=>Ae(t.join(" ")+`
`),ws=async(t,...e)=>{for(let r of e.join(" ").split(""))Ae(r),await me(t)};var y=t=>t;var Ar=y({patches:[{executable:"C:/system/local/bin/shell36",find:/document\.addEventListener\("keydown",/,replace:()=>"("}],manifest:{name:"forcereboot",description:"Removes the reboot confirmation when pressing Ctrl+R or F5",authors:["redstonekasi"]}});var Er=y({patches:[{find:/Windows 96 main<br>/,replace:t=>`${t}ropeswing 9d069a9<br>`},{find:/Other trademarks and logos are property of their respective owners\./,replace:t=>`${t}

ropeswing 9d069a9, an <a href="https://github.com/uwu/ropeswing">uwunet project</a>.`,executable:"C:/system/local/bin/about-ui"}],onLoad(){localStorage["ropeswing-welcome"]!=="true"&&(localStorage["ropeswing-welcome"]="true",w96.WApplication.execAsync(this.dialog(w96.WApplication),[]))},manifest:{name:"housekeeper",description:"basic ropeswing info, e.g. welcome dialog, version listing",authors:["redstonekasi","Beef"]},core:!0,dialog:t=>new class extends t{async main(r){super.main(r);let s=this.createWindow({title:"ropeswing",initialHeight:120,initialWidth:260,resizable:!1,bodyClass:"dlg-run-box",controlBoxStyle:"WS_CBX_CLOSE"}),o=s.getBodyContainer();o.innerHTML='<div class="text exp">ropeswing has been installed!<br>Check your system settings in order to configure it.</div><button class="w96-button">OK</button>',o.querySelector("button")?.addEventListener("click",()=>s.close(!1)),s.setPosition(window.innerWidth/2-130,window.innerHeight/2-60),s.show()}}});var gr=y({patches:[{find:/\(await\(0,.{1,2}\..{1,2}\)\(i\.value\)\)\.valid/,replace:"true"},{find:"the product key you have received on Patreon",replace:t=>`<s>${t}</s> any product key`}],manifest:{name:"keygen",description:"makes the keymgr app (patreon rewards app) accept any key",authors:["Beef"]}});var Sr=y({patches:[{executable:"C:/system/local/bin/resetwiz",find:/localStorage\.clear\(\)/g,replace:t=>`$self.save(),${t},$self.restore()`}],manifest:{name:"persist",description:"persist ropeswing installation across reset",authors:["redstonekasi"]},kinject:"",save(){this.kinject=kutil.sysrom.read("KINJECT.js")},restore(){kutil.sysrom.write("KINJECT.js",this.kinject)},core:!0});var wt=Symbol("Cached"),$=Symbol("Observable"),et=Symbol("Observable.Frozen"),rt=Symbol("Observable.Readable"),ge=Symbol("Observable.Writable"),st=Symbol("Store"),Jt=Symbol("Store.Keys"),ot=Symbol("Store.Observable"),Yt=Symbol("Store.Target"),_t=Symbol("Store.Values"),Qt=Symbol("Store.Untracked"),N=Symbol("Suspense"),Y=Symbol("Uncached"),nt=Symbol("Untracked"),W=Symbol("Untracked.Unwrapped");var br=t=>it(t)?t:[t],xr=t=>t instanceof Error?t:typeof t=="string"?new Error(t):new Error("Unknown error"),{is:mt}=Object,{isArray:it}=Array,Or=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0,s=t.length;r<s;r++){let o=t[r],n=e[r];if(!mt(o,n))return!1}return!0},g=t=>typeof t=="function",It=t=>t!==null&&typeof t=="object",yr=t=>typeof t=="symbol",Gt=()=>{},kt=()=>!1;function _s(){if(arguments.length)throw new Error("A readonly Observable can not be updated");return this}function Rs(){if(arguments.length)throw new Error("A readonly Observable can not be updated");return this.get()}function Bs(t){return arguments.length?g(t)?this.C(t):this.set(t):this.get()}var I=t=>{let e=_s.bind(t);return e[$]=!0,e[et]=!0,e},ft=t=>{let e=Rs.bind(t);return e[$]=!0,e[rt]=t,e},wr=t=>{let e=Bs.bind(t);return e[$]=!0,e[ge]=t,e};var Se=0,Rt=1,dt=2,ht=3,mn=I(!1),dn=I(!0),Zt=new Proxy({},new Proxy({},{get(){throw new Error("Unavailable value")}})),Xt=function(){};var jt=(t,e)=>{if(t instanceof Array)for(let r=0,s=t.length;r<s;r++)e(t[r]);else t&&e(t)},Dt=(t,e)=>{if(t instanceof Array)for(let r=t.length-1;r>=0;r--)e(t[r]);else t&&e(t)},K=(t,e,r)=>{let s=t[e];s instanceof Array?s.push(r):s?t[e]=[s,r]:t[e]=r},R=(t,e,r)=>{let s=t[e];if(s instanceof Set)s.add(r);else if(s){if(r!==s){let o=new Set;o.add(s),o.add(r),t[e]=o}}else t[e]=r},B=(t,e,r)=>{let s=t[e];s instanceof Set?s.delete(r):s===r&&(t[e]=void 0)},At=(t,e)=>{if(t instanceof Set)for(let r of t)e(r);else t&&e(t)};var Ls=t=>t.call(t),be=t=>t.Q(!0),xe=class{constructor(){this.disposed=!1,this.B=void 0,this.S=void 0,this.D=void 0,this.K=void 0,this.T=void 0,this.U=void 0}catch(e,r){let{S:s}=this;if(s)return s(e),!0;if(this.parent?.catch(e,!0))return!0;if(r)return!1;throw e}Q(e){Dt(this.D,be),Dt(this.K,be),Dt(this.U,be),Dt(this.B,Ls),this.B=void 0,this.disposed=e,this.S=void 0,this.K=void 0,this.U=void 0}get(e){return this.context?.[e]}E(e,r,s){let o=E,n=D;Oe(r),Bt(s);try{return e()}catch(f){return this.catch(xr(f),!1),Zt}finally{Oe(o),Bt(n)}}},v=xe;var ye=class extends v{constructor(){super(...arguments),this.context={}}},_r=ye;var ct,we=new _r,D,E=we;var Bt=t=>D=t,Oe=t=>E=t;var Cs=t=>g(t)&&(et in t||!!t[rt]?.parent?.disposed),te=Cs;var Ts=t=>g(t)&&(nt in t||W in t),ee=Ts;var _e=class{constructor(){this.A1=[],this.M=0,this.A2=!1,this.N=()=>{if(!this.A2&&!this.M&&this.A1.length)try{for(this.A2=!0;;){let e=this.A1;if(!e.length)break;this.A1=[];for(let r=0,s=e.length;r<s;r++)e[r].C()}}finally{this.A2=!1}},this.E=e=>{this.M+=1,e(),this.M-=1,this.N()},this.F=e=>{this.A1.push(e)}}},Et=new _e;var Re=class{constructor(e,r,s){this.K=new Set,this.value=e,s&&(this.parent=s),r?.equals!==void 0&&(this.equals=r.equals||kt)}get(){return this.parent?.disposed||(this.parent?.C(),D?.A.L(this)),this.value}set(e){let r=this.equals||mt;return(this.value===Xt||!r(e,this.value))&&(this.value=e,Et.M+=1,this.I(ht),Et.M-=1,Et.N()),e}I(e){for(let r of this.K)(r.J!==Rt||r.A.has(this))&&(r.sync?(r.J=Math.max(r.J,e),Et.F(r)):r.I(e))}C(e){let r=e(this.value);return this.set(r)}},L=Re;var re=class{constructor(e){this.observer=e,this.A=[],this.P=0}Q(e){if(e){let{observer:r,A:s}=this;for(let o=0;o<s.length;o++)s[o].K.delete(r)}this.P=0}R(){let{observer:e,A:r,P:s}=this,o=r.length;if(s<o){for(let n=s;n<o;n++)r[n].K.delete(e);r.length=s}}empty(){return!this.A.length}has(e){let r=this.A.indexOf(e);return r>=0&&r<this.P}L(e){let{observer:r,A:s,P:o}=this,n=s.length;if(n>0){if(s[o]===e){this.P+=1;return}let f=s.indexOf(e);if(f>=0&&f<o)return;o<n-1?this.R():o===n-1&&s[o].K.delete(r)}e.K.add(r),s[this.P++]=e,o===128&&(r.A=new Be(r,s))}C(){let{A:e}=this;for(let r=0,s=e.length;r<s;r++)e[r].parent?.C()}},Be=class{constructor(e,r){this.observer=e,this.A=new Set(r)}Q(e){for(let r of this.A)r.K.delete(this.observer)}R(){}empty(){return!this.A.size}has(e){return this.A.has(e)}L(e){let{observer:r,A:s}=this,o=s.size;e.K.add(r);let n=s.size;o!==n&&s.add(e)}C(){for(let e of this.A)e.parent?.C()}};var Le=class extends v{constructor(){super(),this.parent=E,this.context=E.context,this.J=ht,this.A=new re(this),E!==we&&K(this.parent,"K",this)}Q(e){this.A.Q(e),super.Q(e)}H(e){this.Q(!1),this.J=Rt;try{return this.E(e,this,this)}finally{this.A.R()}}run(){throw new Error("Abstract method")}I(e){throw new Error("Abstract method")}C(){this.disposed||(this.J===dt&&this.A.C(),this.J===ht?(this.J=Rt,this.run(),this.J===Rt?this.J=Se:this.C()):this.J=Se)}},se=Le;var Ce=class extends se{constructor(e,r){super(),this.fn=e,this.observable=new L(Xt,r,this),r?.sync===!0&&(this.sync=!0,this.C())}run(){let e=super.H(this.fn);!this.disposed&&this.A.empty()&&(this.disposed=!0),e!==Zt&&this.observable.set(e)}I(e){let r=this.J;r>=e||(this.J=e,r!==dt&&this.observable.I(dt))}},Rr=Ce;var Ms=(t,e)=>{if(te(t))return t;if(ee(t))return I(t());{let r=new Rr(t,e);return ft(r.observable)}},G=Ms;var Ns=t=>g(t)?te(t)||ee(t)?!!t():G(()=>!!t()):!!t,Br=Ns;var Ys=t=>{K(E,"B",t)},U=Ys;var Te=class extends v{constructor(e){super(),this.parent=E,this.context={...E.context,...e},K(this.parent,"D",this)}E(e){return super.E(e,this,void 0)}},Lr=Te;function Is(t,e){return yr(t)?E.context[t]:new Lr(t).E(e||Gt)}var Me=Is;var Ne=class{constructor(){this.A1=[],this.A2=!1,this.A3=!1,this.N=()=>{if(!this.A2&&this.A1.length)try{for(this.A2=!0;;){let e=this.A1;if(!e.length)break;this.A1=[];for(let r=0,s=e.length;r<s;r++)e[r].C()}}finally{this.A2=!1}},this.queue=()=>{this.A3||(this.A3=!0,this.resolve())},this.resolve=()=>{queueMicrotask(()=>{queueMicrotask(()=>{ct?ct.finally(this.resolve):(this.A3=!1,this.N())})})},this.F=e=>{this.A1.push(e),this.queue()}}},Ut=new Ne;var Ye=class extends se{constructor(e,r){if(super(),this.fn=e,r?.suspense!==!1){let s=this.get(N);s&&(this.suspense=s)}r?.sync===!0&&(this.sync=!0),r?.sync==="init"?(this.init=!0,this.C()):this.F()}run(){let e=super.H(this.fn);g(e)&&K(this,"B",e)}F(){this.suspense?.suspended||(this.sync?this.C():Ut.F(this))}I(e){let r=this.J;r>=e||(this.J=e,(!this.sync||r!==2&&r!==3)&&this.F())}C(){this.suspense?.suspended||super.C()}},oe=Ye;var Ds=(t,e)=>{let r=new oe(t,e);return()=>r.Q(!0)},gt=Ds;function Ft(t){if(g(t))return W in t?Ft(t()):nt in t?I(Ft(t())):$ in t?t:G(()=>Ft(t()));if(t instanceof Array){let e=new Array(t.length);for(let r=0,s=e.length;r<s;r++)e[r]=Ft(t[r]);return e}else return t}var St=Ft;var Ie=class extends v{constructor(e){super(),this.parent=E,this.context=E.context,e&&this.get(N)&&(this.A0=!0,R(this.parent,"T",this))}Q(e){this.A0&&B(this.parent,"T",this),super.Q(e)}E(e){let r=()=>this.Q(!0),s=()=>e(r);return super.E(s,this,void 0)}},Lt=Ie;var Us=I(-1),De=class extends Lt{},Ue=class{constructor(e){this.parent=E,this.suspense=E.get(N),this.A5=new Map,this.A6=!1,this.A7=0,this.A8=0,this.A9=0,this.cleanup=()=>{if(!this.A7||this.A7===this.A8)return;let{A5:r,A6:s}=this;r.size&&(this.A9?r.forEach((o,n)=>{o.A6!==s&&(o.Q(!0),r.delete(n))}):(this.A5.forEach(o=>{o.Q(!0)}),this.A5=new Map))},this.Q=()=>{this.suspense&&B(this.parent,"T",this.T),this.A7=this.A5.size,this.A8=0,this.A9=0,this.cleanup()},this.AA=()=>{this.A6=!this.A6,this.A8=0,this.A9=0},this.O=r=>{this.A9=r.length,this.cleanup(),this.A7=this.A9,this.A8=0},this.map=r=>{this.AA();let{A5:s,A6:o,fn:n,AB:f}=this,c=new Array(r.length),i=!0,l=!0,m=0;for(let a=0,p=r.length;a<p;a++){let d=r[a],u=s.get(d);if(u&&u.A6!==o)l=!1,m+=1,u.A6=o,u.index?.set(a),c[a]=u.G;else{i=!1;let h=new De(!1);u&&U(()=>h.Q(!0)),h.E(()=>{let A=Us;f&&(h.index=new L(a),A=ft(h.index));let S=c[a]=St(n(d,A));h.A6=o,h.G=S,u||s.set(d,h)})}}return this.A8=m,this.O(r),i&&(c[wt]=!0),l&&(c[Y]=!0),c},this.T=()=>Array.from(this.A5.values()),this.fn=e,this.AB=e.length>1,this.suspense&&R(this.parent,"T",this.T)}},Cr=Ue;var Fs=t=>g(t)&&$ in t,Pt=Fs;function Ps(t,e=!0){return(e?g:Pt)(t)?t():t}var k=Ps;var Fe=class extends v{constructor(){super(),this.parent=E,this.context={...E.context,[N]:this},K(this.parent,"U",this),this.suspended=E.get(N)?.suspended||0}A4(e){if(!this.suspended&&!e)return;let r=this.suspended,s=r+(e?1:-1);if(this.suspended=s,!!r==!!s)return;this.observable?.set(!!s);let o=i=>{jt(i.D,o),jt(i.K,n),jt(i.U,c),At(i.T,f)},n=i=>{i instanceof oe&&(i.J===dt||i.J===ht)&&(i.init?i.C():i.F()),o(i)},f=i=>{g(i)?i().forEach(o):o(i)},c=i=>{i.A4(e)};o(this)}E(e){return super.E(e,this,void 0)}},Tr=Fe;var Vs=(t,e)=>{let r=new Tr,s=Br(t);return gt(()=>r.A4(k(s)),{sync:!0}),r.E(e)},Mr=Vs;var $s=I(-1),Pe=class extends Lt{},Ve=class{constructor(e,r){this.parent=E,this.suspense=E.get(N),this.A5=new Map,this.AC=[],this.AD=0,this.cleanup=()=>{let s=0,o=Math.max(0,this.pooled?this.AD-this.AC.length:0);this.A5.forEach(n=>{o>0&&s++<o?(n.suspended?.set(!0),this.AC.push(n)):n.Q(!0)})},this.Q=()=>{this.suspense&&B(this.parent,"T",this.T),this.A5.forEach(s=>{s.Q(!0)}),this.AC.forEach(s=>{s.Q(!0)})},this.map=s=>{let{A5:o,fn:n,AB:f}=this,c=new Map,i=new Array(s.length),l=this.AC,m=this.pooled,a=!0,p=!0,d=[];if(o.size)for(let u=0,h=s.length;u<h;u++){let A=s[u],S=o.get(A);S?(p=!1,o.delete(A),c.set(A,S),S.index?.set(u),i[u]=S.G):d.push(u)}else d=new Array(i.length);t:for(let u=0,h=d.length;u<h;u++){let A=d[u]||u,S=s[A],j=c.has(S);if(!j)for(let[tt,J]of o.entries()){o.delete(tt),c.set(S,J),J.index?.set(A),J.value?.set(S),i[A]=J.G;continue t}a=!1;let b;m&&l.length?(b=l.pop(),b.index?.set(A),b.value?.set(S),b.suspended?.set(!1),i[A]=b.G):(b=new Pe(!1),b.E(()=>{let tt=$s;f&&(b.index=new L(A),tt=ft(b.index));let J=b.value=new L(S),Nt=m?new L(!1):void 0,qt=G(()=>k(J.get())),xs=i[A]=Nt?Mr(()=>Nt.get(),()=>St(n(qt,tt))):St(n(qt,tt));b.value=J,b.G=xs,b.suspended=Nt})),j?U(()=>b.Q(!0)):c.set(S,b)}return this.AD=Math.max(this.AD,i.length),this.cleanup(),this.A5=c,a&&(i[wt]=!0),p&&(i[Y]=!0),i},this.T=()=>[...this.A5.values(),...this.AC.values()],this.fn=e,this.AB=e.length>1,this.pooled=r,this.suspense&&R(this.parent,"T",this.T)}},Nr=Ve;var Ws=t=>It(t)&&st in t,C=Ws;function Ks(t){if(g(t)){let e=D;if(e)try{return Bt(void 0),t()}finally{Bt(e)}else return t()}else return t}var lt=Ks;function vs(t,e,r=[],s){let{Q:o,map:n}=s?.unkeyed?new Nr(e,!!s.pooled):new Cr(e);U(o);let f=G(()=>k(t),{equals:(c,i)=>!!c&&!!i&&!c.length&&!i.length&&!C(c)&&!C(i)});return G(()=>{let c=f();return C(c)&&c[_t],lt(()=>{let i=n(c);return i?.length?i:St(r)})},{equals:(c,i)=>it(c)&&!!c[wt]&&it(i)&&Or(c,i)})}var $e=vs;var Hs=()=>!!ct||Ut.A3||Ut.A2||Et.A2,Yr=Hs;function qs(t,e){return wr(new L(t,e))}var We=qs;var zs=t=>new Lt(!0).E(t),Ke=zs;var q=class extends Map{AH(e,r){return super.set(e,r),r}},Ct=class{constructor(){this.AE=0}listen(){this.AE+=1,U(this)}call(){this.AE-=1,!this.AE&&this.Q()}Q(){}},ve=class extends Ct{constructor(e,r){super(),this.parent=e,this.observable=r}Q(){this.parent.keys=void 0}},He=class extends Ct{constructor(e,r){super(),this.parent=e,this.observable=r}Q(){this.parent.values=void 0}},qe=class extends Ct{constructor(e,r,s){super(),this.parent=e,this.key=r,this.observable=s}Q(){this.parent.has?.delete(this.key)}},ze=class extends Ct{constructor(e,r,s,o){super(),this.parent=e,this.key=r,this.observable=s,this.AI=o}Q(){this.parent.AJ?.delete(this.key)}},_={AK:0,AL:new Set,AM:new Set,AN:()=>{let{AL:t,AM:e}=_,r=new Set,s=o=>{r.has(o)||(r.add(o),At(o.AO,s),At(o.AP,n=>{t.add(n)}))};return e.forEach(s),()=>{t.forEach(o=>{o()})}},V:t=>{_.AM.add(t),F.F()},reset:()=>{_.AL=new Set,_.AM=new Set}},x={AK:0,AM:new Map,AN:()=>{let{AM:t}=x;return()=>{t.forEach((e,r)=>{let s=Array.from(e);At(r.AQ,o=>{o(s)})})}},V:(t,e)=>{let r=x.AM.get(t)||new Set;r.add(e),x.AM.set(t,r),F.F()},AR:(t,e,r)=>{if(e.AO){let s=new Set,o=n=>{s.has(n)||(s.add(n),At(n.AO,f=>{f.AO||x.V(f,n.store),o(f)}))};o(t||e)}else{let s=t?.store||lt(()=>e.store[r]);x.V(e,s)}},reset:()=>{x.AM=new Map}},F={AK:!1,N:()=>{let t=_.AN(),e=x.AN();F.reset(),t(),e()},AS:()=>{Yr()?ct?ct.finally(F.AS):setTimeout(F.AS,0):F.N()},reset:()=>{F.AK=!1,_.reset(),x.reset()},F:()=>{F.AK||(F.AK=!0,queueMicrotask(F.AS))}},Tt=new WeakMap,Js=new Set([st,Jt,ot,Yt,_t]),Qs=new Set(["__proto__","__defineGetter__","__defineSetter__","__lookupGetter__","__lookupSetter__","prototype","constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toSource","toString","valueOf"]),Gs={get:(t,e)=>{if(Js.has(e)){if(e===st)return!0;if(e===Yt)return t;if(e===Jt){if(Vt()){let i=H(t);i.keys||(i.keys=Ir(i)),i.keys.listen(),i.keys.observable.get()}return}if(e===_t){if(Vt()){let i=H(t);i.values||(i.values=Zs(i)),i.values.listen(),i.values.observable.get()}return}if(e===ot)return i=>{i=typeof i=="number"?String(i):i;let l=H(t),m=l.AT?.get(i);if(m)return m.bind(l.store);l.AJ||(l.AJ=new q);let a=t[i],p=l.AJ.get(i)||l.AJ.AH(i,Dr(l,i,a)),d=l.equals?{equals:l.equals}:void 0;return p.observable||(p.observable=Wt(l,a,d)),ft(p.observable)}}if(Qs.has(e))return t[e];let r=H(t),s=r.AT?.get(e),o=s||t[e];r.AJ||(r.AJ=new q);let n=Vt(),f=$t(o),c=n||f?r.AJ.get(e)||r.AJ.AH(e,Dr(r,e,o)):void 0;if(c?.AI&&R(c.AI,"AO",r),c&&n){let i=r.equals?{equals:r.equals}:void 0;c.listen(),c.observable||(c.observable=Wt(r,o,i)),c.observable.get()}return s?s.call(r.store):typeof o=="function"&&o===Array.prototype[e]?function(){return o.apply(r.store,arguments)}:c?.AI?.store||o},set:(t,e,r)=>{r=bt(r);let s=H(t),o=s.AU?.get(e);if(o)o.call(s.store,r);else{let n=t[e],f=!!n||e in t,c=s.equals||mt;if(f&&c(r,n)&&(e!=="length"||!Array.isArray(t)))return!0;t[e]=r,s.values?.observable.set(0),f||(s.keys?.observable.set(0),s.has?.get(e)?.observable.set(!0));let i=s.AJ?.get(e);i?.AI&&B(i.AI,"AO",s),i&&(i.observable?.set(r),i.AI=$t(r)?Tt.get(r)||ne(r,s):void 0),i?.AI&&R(i.AI,"AO",s),x.AK&&x.AR(i?.AI,s,e),_.AK&&_.V(s)}return!0},deleteProperty:(t,e)=>{if(!(e in t))return!0;if(!Reflect.deleteProperty(t,e))return!1;let o=H(t);o.keys?.observable.set(0),o.values?.observable.set(0),o.has?.get(e)?.observable.set(!1);let n=o.AJ?.get(e);return x.AK&&x.AR(n?.AI,o,e),n?.AI&&B(n.AI,"AO",o),n&&(n.observable?.set(void 0),n.AI=void 0),_.AK&&_.V(o),!0},defineProperty:(t,e,r)=>{let s=H(t),o=s.equals||mt,n=e in t,f=Reflect.getOwnPropertyDescriptor(t,e);if(f&&ro(f,r,o))return!0;if(!Reflect.defineProperty(t,e,r))return!1;r.get?r.get&&(s.AT||(s.AT=new q),s.AT.set(e,r.get)):s.AT?.delete(e),r.set?r.set&&(s.AU||(s.AU=new q),s.AU.set(e,r.set)):s.AU?.delete(e),n!==!!r.enumerable&&(s.keys?.observable.set(0),s.has?.get(e)?.observable.set(!!r.enumerable));let i=s.AJ?.get(e);if(x.AK&&x.AR(i?.AI,s,e),i?.AI&&B(i.AI,"AO",s),i)if("get"in r)i.observable?.set(r.get),i.AI=void 0;else{let l=r.value;i.observable?.set(l),i.AI=$t(l)?Tt.get(l)||ne(l,s):void 0}return i?.AI&&R(i.AI,"AO",s),x.AK&&x.AR(i?.AI,s,e),_.AK&&_.V(s),!0},has:(t,e)=>{if(e===st||e===Yt)return!0;let r=e in t;if(Vt()){let s=H(t);s.has||(s.has=new q);let o=s.has.get(e)||s.has.AH(e,Xs(s,e,r));o.listen(),o.observable.get()}return r},ownKeys:t=>{let e=Reflect.ownKeys(t);if(Vt()){let r=H(t);r.keys||(r.keys=Ir(r)),r.keys.listen(),r.keys.observable.get()}return e}},ks={has:(t,e)=>e===Qt?!0:e in t},ne=(t,e,r)=>{let s=new Proxy(t,Gs),o=js(t),n={AO:e,store:s};if(o){let{AT:f,AU:c}=o;f&&(n.AT=f),c&&(n.AU=c)}return r===!1?n.equals=kt:r?n.equals=r:e?.equals&&(n.equals=e.equals),Tt.set(t,n),n},H=t=>{let e=Tt.get(t);if(!e)throw new Error("Impossible");return e},Ur=t=>H(bt(t)),Ir=t=>{let e=Wt(t,0,{equals:!1});return new ve(t,e)},Zs=t=>{let e=Wt(t,0,{equals:!1});return new He(t,e)},Xs=(t,e,r)=>{let s=Wt(t,r);return new qe(t,e,s)},Wt=(t,e,r)=>new L(e,r),Dr=(t,e,r)=>{let o=$t(r)?Tt.get(r)||ne(r,t):void 0,n=new ze(t,e,void 0,o);return t.AJ||(t.AJ=new q),t.AJ.set(e,n),n},js=t=>{if(it(t))return;let e,r,s=Object.keys(t);for(let o=0,n=s.length;o<n;o++){let f=s[o],c=Object.getOwnPropertyDescriptor(t,f);if(!c)continue;let{get:i,set:l}=c;i&&(e||(e=new q),e.set(f,i)),l&&(r||(r=new q),r.set(f,l))}if(!(!e&&!r))return{AT:e,AU:r}},to=(t,e)=>C(t)?t:(Tt.get(t)||ne(t,void 0,e?.equals)).store,bt=t=>C(t)?t[Yt]:t,eo=t=>!It(t)||Fr(t)?t:new Proxy(t,ks),ro=(t,e,r)=>!!t.configurable==!!e.configurable&&!!t.enumerable==!!e.enumerable&&!!t.writable==!!e.writable&&r(t.value,e.value)&&t.get===e.get&&t.set===e.set,Vt=()=>!!D,$t=t=>{if(t===null||typeof t!="object")return!1;if(st in t)return!0;if(Qt in t)return!1;if(it(t))return!0;let e=Object.getPrototypeOf(t);return e===null?!0:Object.getPrototypeOf(e)===null},Fr=t=>t===null||typeof t!="object"?!1:Qt in t,Mt=(t,e)=>!It(t)||Fr(t)?t:to(t,e);Mt.on=(t,e)=>{let r=br(t),s=r.filter(g),o=r.filter(C).map(Ur);_.AK+=1;let n=s.map(f=>{let c=!1;return gt(()=>{c&&(_.AL.add(e),F.F()),c=!0,f()},{suspense:!1,sync:!0})});return o.forEach(f=>{R(f,"AP",e)}),()=>{_.AK-=1,n.forEach(f=>{f()}),o.forEach(f=>{B(f,"AP",e)})}};Mt._onRoots=(t,e)=>{if(!C(t))return Gt;let r=Ur(t);if(r.AO)throw new Error("Only top-level stores are supported");return x.AK+=1,R(r,"AQ",e),()=>{x.AK-=1,B(r,"AQ",e)}};Mt.reconcile=(()=>{let t=o=>it(o)?1:$t(o)?2:0,e=(o,n)=>{let f=bt(o),c=bt(n);r(o,n);let i=t(f),l=t(c);return(i===1||l===1)&&(o.length=n.length),o},r=(o,n)=>{let f=bt(o),c=bt(n),i=Object.keys(f),l=Object.keys(c);for(let m=0,a=l.length;m<a;m++){let p=l[m],d=f[p],u=c[p];if(mt(d,u))d===void 0&&!(p in f)&&(o[p]=void 0);else{let h=t(d),A=t(u);h&&h===A?(r(o[p],u),h===1&&(o[p].length=u.length)):o[p]=u}}for(let m=0,a=i.length;m<a;m++){let p=i[m];p in c||delete o[p]}return o};return(o,n)=>lt(()=>e(o,n))})();Mt.untrack=t=>eo(t);Mt.unwrap=t=>bt(t);var Je=Mt;var so=()=>{let t=E,e=D;return r=>t.E(()=>r(),t,e)},Qe=so;var at=lt;var Pr={},Bc=Symbol("Suspense"),Vr=Symbol("Template.Accessor"),$r={};var oo=t=>(t[W]=!0,t),ie=oo;var Ge=document.createComment.bind(document,""),Wr=document.createElement.bind(document),Kr=document.createElementNS.bind(document,"http://www.w3.org/2000/svg"),xt=document.createTextNode.bind(document);var{assign:ke}=Object,Ze=t=>z(t)?t:[t];var vr=t=>{for(let e=0,r=t.length;e<r;e++)if(z(t[e]))return t.flat(1/0);return t},Yc=(()=>{let t=Array.prototype.indexOf;return(e,r)=>t.call(e,r)})(),{isArray:z}=Array,Hr=t=>typeof t=="boolean";var O=t=>typeof t=="function",Z=t=>!(nt in t||W in t||et in t||t[rt]?.parent?.disposed),T=t=>t==null,qr=t=>t instanceof Node;var M=t=>typeof t=="string",Ot=t=>!!t.isSVG,zr=(()=>{let t=/^(t(ext$|s)|s[vwy]|g)|^set|tad|ker|p(at|s)|s(to|c$|ca|k)|r(ec|cl)|ew|us|f($|e|s)|cu|n[ei]|l[ty]|[GOP]/,e={};return r=>{let s=e[r];return s!==void 0?s:e[r]=!r.includes("-")&&t.test(r)}})(),Jr=t=>O(t)&&Vr in t;var Qr=t=>t==null||typeof t=="boolean"||typeof t=="symbol";var Xe=U;var Gr=gt;var kr=Pt;var P=k;var je=We;var no={sync:"init"},io=t=>Gr(t,no),V=io;var Kt=Ke;var fo=()=>{let t=!1,e=()=>t;return Xe(()=>t=!0),e},Zr=fo;var co=t=>{let e=Zr(),r=Qe();queueMicrotask(()=>{e()||r(t)})},tr=co;var fe=C;var ce=Je;var Xr=(t,e,r)=>{let{className:s}=t;if(M(s))if(s){if(!r&&s===e){t.className="";return}}else if(r){t.className=e;return}else return;e.includes(" ")?e.split(" ").forEach(o=>{o.length&&t.classList.toggle(o,!!r)}):t.classList.toggle(e,!!r)};var le=document.createComment(""),er=[le],rr=[le],lo=(t,e,r,s)=>{if(e===r)return;e instanceof Node&&(er[0]=e,e=er),r instanceof Node&&(rr[0]=r,r=rr);let o=r.length,n=e.length,f=o,c=0,i=0,l=null,m;for(;c<n||i<f;)if(n===c){let a=f<o?i?r[i-1].nextSibling:r[f-i]:s;i<f&&(a?a.before.apply(a,r.slice(i,f)):t.append.apply(t,r.slice(i,f)),i=f)}else if(f===i)for(;c<n;){if(!l||!l.has(e[c])){m=e[c];try{t.removeChild(m)}catch{}}c++}else if(e[c]===r[i])c++,i++;else if(e[n-1]===r[f-1])n--,f--;else if(e[c]===r[f-1]&&r[i]===e[n-1]){let a=e[--n].nextSibling;t.insertBefore(r[i++],e[c++].nextSibling),t.insertBefore(r[--f],a),e[n]=r[f]}else{if(!l){l=new Map;let a=i;for(;a<f;)l.set(r[a],a++)}if(l.has(e[c])){let a=l.get(e[c]);if(i<a&&a<f){let p=c,d=1;for(;++p<n&&p<f&&l.get(e[p])===a+d;)d++;if(d>a-i){let u=e[c];i<a&&(u?u.before.apply(u,r.slice(i,a)):t.append.apply(t,r.slice(i,a)),i=a)}else t.replaceChild(r[i++],e[c++])}else c++}else{m=e[c++];try{t.removeChild(m)}catch{}}}er[0]=le,rr[0]=le},jr=lo;var ao=[],yt={make:()=>({values:void 0,length:0}),makeWithNode:t=>({values:t,length:1}),makeWithFragment:t=>({values:t,fragmented:!0,length:1}),getChildrenFragmented:(t,e=[])=>{let{values:r,length:s}=t;if(!s)return e;if(r instanceof Array)for(let o=0,n=r.length;o<n;o++){let f=r[o];f instanceof Node?e.push(f):yt.getChildrenFragmented(f,e)}else r instanceof Node?e.push(r):yt.getChildrenFragmented(r,e);return e},getChildren:t=>t.length?t.fragmented?t.length===1?yt.getChildren(t.values):yt.getChildrenFragmented(t):t.values:ao,pushFragment:(t,e)=>{yt.pushValue(t,e),t.fragmented=!0},pushNode:(t,e)=>{yt.pushValue(t,e)},pushValue:(t,e)=>{let{values:r,length:s}=t;s===0?t.values=e:s===1?t.values=[r,e]:r.push(e),t.length+=1},replaceWithNode:(t,e)=>{t.values=e,delete t.fragmented,t.length=1},replaceWithFragment:(t,e)=>{t.values=e.values,t.fragmented=e.fragmented,t.length=e.length}},w=yt;var vt=(t,e,r=!1)=>{if(O(t))Z(t)?V(()=>{vt(t(),e,!0)}):vt(t(),e,r);else if(z(t)){let[s,o]=po(t);s[Y]=t[Y],e(s,o||r)}else e(t,r)},ae=(t,e={})=>{if(M(t))t.split(/\s+/g).filter(Boolean).filter(r=>{e[r]=!0});else if(O(t))ae(t(),e);else if(z(t))t.forEach(r=>{ae(r,e)});else if(t)for(let r in t){let s=t[r];P(s)&&(e[r]=!0)}return e},po=(()=>{let t=[],e=(r,s,o)=>{for(let n=0,f=r.length;n<f;n++){let c=r[n],i=typeof c;i==="string"||i==="number"||i==="bigint"?(s===t&&(s=r.slice(0,n)),s.push(xt(c))):i==="object"&&z(c)?(s===t&&(s=r.slice(0,n)),o=e(c,s,o)[1]):i==="function"&&kr(c)?(s!==t&&s.push(c),o=!0):s!==t&&s.push(c)}return s===t&&(s=r),[s,o]};return r=>e(r,t,!1)})();var nr=(()=>{let t=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"]),e=/e(r[HRWrv]|[Vawy])|Con|l(e[Tcs]|c)|s(eP|y)|a(t[rt]|u|v)|Of|Ex|f[XYa]|gt|hR|d[Pg]|t[TXYd]|[UZq]/,r={},s=/[A-Z]/g,o=n=>r[n]||(r[n]=e.test(n)?n:n.replace(s,f=>`-${f.toLowerCase()}`));return(n,f,c)=>{Ot(n)?(f=f==="xlinkHref"||f==="xlink:href"?"href":o(f),T(c)||c===!1&&t.has(f)?n.removeAttribute(f):n.setAttribute(f,String(c))):T(c)||c===!1&&t.has(f)?n.removeAttribute(f):(c=c===!0?"":String(c),n.setAttribute(f,c))}})(),uo=(t,e,r)=>{O(r)&&Z(r)?V(()=>{nr(t,e,r())}):nr(t,e,P(r))};var mo=(t,e)=>{if(e.nodeType===3)return e.nodeValue=t,e;{let r=e.parentElement;if(!r)throw new Error("Invalid child replacement");let s=xt(t);return r.replaceChild(s,e),s}};var ns=(t,e,r,s,o)=>{if(!o&&s===void 0)return;let n=w.getChildren(e),f=n instanceof Array,c=f?n.length:1,i=f?n[0]:n,m=(f?n[c-1]:n)?.nextSibling||null;if(c===0){let h=typeof s;if(h==="string"||h==="number"||h==="bigint"){let A=xt(s);r||t.appendChild(A),w.replaceWithNode(e,A);return}else if(h==="object"&&s!==null&&typeof s.nodeType=="number"){let A=s;r||t.insertBefore(A,null),w.replaceWithNode(e,A);return}}if(c===1){let h=typeof s;if(h==="string"||h==="number"||h==="bigint"){let A=mo(String(s),i);w.replaceWithNode(e,A);return}}let a=w.make(),p=Array.isArray(s)?s:[s];for(let h=0,A=p.length;h<A;h++){let S=p[h],j=typeof S;if(j==="string"||j==="number"||j==="bigint")w.pushNode(a,xt(S));else if(j==="object"&&S!==null&&typeof S.nodeType=="number")w.pushNode(a,S);else if(j==="function"){let b=w.make(),tt=!r;w.pushFragment(a,b),vt(S,(J,Nt)=>{let qt=tt;tt=!1,ns(t,b,qt,J,Nt)})}}let d=w.getChildren(a),u=a.length;if(!(u===0&&c===1&&i.nodeType===8)){if(!r&&(u===0||c===1&&i.nodeType===8||p[Y])){let{childNodes:h}=t;if(h.length===c){if(t.textContent="",u===0){let A=Ge();w.pushNode(a,A),d!==a.values&&(d=A,u+=1)}m?d instanceof Array?m.before.apply(m,d):t.insertBefore(d,m):d instanceof Array?t.append.apply(t,d):t.append(d),w.replaceWithFragment(e,a);return}}if(u===0){let h=Ge();w.pushNode(a,h),d!==a.values&&(d=h,u+=1)}r||jr(t,n,d,m),w.replaceWithFragment(e,a)}},fr=(t,e,r=w.make())=>{vt(e,ns.bind(void 0,t,r,!1))},pe=Xr,sr=(t,e,r)=>{O(r)&&Z(r)?V(()=>{pe(t,e,r())}):pe(t,e,P(r))},ts=(t,e,r,s)=>{s&&s!==!0&&pe(t,s,!1),r&&r!==!0&&pe(t,r,e)},or=(t,e,r)=>{if(O(r)&&Z(r)){let s;V(()=>{let o=r();ts(t,e,o,s),s=o})}else ts(t,e,P(r))},es=(t,e,r)=>{if(M(e))Ot(t)?t.setAttribute("class",e):t.className=e;else{if(r)if(M(r))r&&(Ot(t)?t.setAttribute("class",""):t.className="");else if(z(r)){r=ce.unwrap(r);for(let s=0,o=r.length;s<o;s++)r[s]&&or(t,!1,r[s])}else{r=ce.unwrap(r);for(let s in r)e&&s in e||sr(t,s,!1)}if(z(e))if(fe(e))for(let s=0,o=e.length;s<o;s++){let n=at(()=>O(e[s])?e[s]:e[ot](String(s)));or(t,!0,n)}else for(let s=0,o=e.length;s<o;s++)e[s]&&or(t,!0,e[s]);else if(fe(e))for(let s in e){let o=at(()=>O(e[s])?e[s]:e[ot](s));sr(t,s,o)}else for(let s in e)sr(t,s,e[s])}},ho=(t,e)=>{if(O(e)||z(e)){let r;V(()=>{let s=ae(e);es(t,s,r),r=s})}else es(t,e)},Ao=(t,e,r)=>{let s=$r[e]||Symbol(),o=Me(s)||Pr[s];if(!o)throw new Error(`Directive "${e}" not found`);let n=()=>o.fn(t,...Ze(r));o.immediate?n():tr(n)},Eo=(()=>{let t={onauxclick:["_onauxclick",!1],onbeforeinput:["_onbeforeinput",!1],onclick:["_onclick",!1],ondblclick:["_ondblclick",!1],onfocusin:["_onfocusin",!1],onfocusout:["_onfocusout",!1],oninput:["_oninput",!1],onkeydown:["_onkeydown",!1],onkeyup:["_onkeyup",!1],onmousedown:["_onmousedown",!1],onmouseup:["_onmouseup",!1]},e=r=>{let s=`_${r}`;document.addEventListener(r.slice(2),o=>{let n=o.composedPath(),f=null;Object.defineProperty(o,"currentTarget",{configurable:!0,get(){return f}});for(let c=0,i=n.length;c<i;c++){f=n[c];let l=f[s];if(l&&(l(o),o.cancelBubble))break}f=null})};return(r,s,o)=>{if(s.startsWith("onmiddleclick")){let f=o;s=`onauxclick${s.slice(13)}`,o=f&&(c=>c.button===1&&f(c))}let n=t[s];if(n)n[1]||(n[1]=!0,e(s)),r[n[0]]=o;else if(s.endsWith("passive")){let f=s.endsWith("capturepassive"),c=s.slice(2,-7-(f?7:0)),i=`_${s}`,l=r[i];l&&r.removeEventListener(c,l,{capture:f}),o&&r.addEventListener(c,o,{passive:!0,capture:f}),r[i]=o}else if(s.endsWith("capture")){let f=s.slice(2,-7),c=`_${s}`,i=r[c];i&&r.removeEventListener(f,i,{capture:!0}),o&&r.addEventListener(f,o,{capture:!0}),r[c]=o}else r[s]=o}})(),go=(t,e,r)=>{Eo(t,e,r)},So=(t,e)=>{t.innerHTML=String(T(e)?"":e)},bo=(t,e)=>{V(()=>{So(t,P(P(e).__html))})},rs=(t,e,r)=>{e==="tabIndex"&&Hr(r)&&(r=r?0:void 0),e==="value"&&t.tagName==="SELECT"&&!t._$inited&&(t._$inited=!0,queueMicrotask(()=>t[e]=r)),t[e]=r,T(r)&&nr(t,e,null)},xo=(t,e,r)=>{O(r)&&Z(r)?V(()=>{rs(t,e,r())}):rs(t,e,P(r))},Oo=(t,e)=>{if(T(e))return;let r=vr(Ze(e)).filter(Boolean);r.length&&tr(()=>at(()=>r.forEach(s=>s?.(t))))},ir=(()=>{let t=/^(-|f[lo].*[^se]$|g.{5,}[^ps]$|z|o[pr]|(W.{5})?[lL]i.*(t|mp)$|an|(bo|s).{4}Im|sca|m.{6}[ds]|ta|c.*[st]$|wido|ini)/i,e={};return(r,s,o)=>{s.charCodeAt(0)===45?T(o)?r.style.removeProperty(s):r.style.setProperty(s,String(o)):T(o)?r.style[s]=null:r.style[s]=M(o)||e[s]||(e[s]=t.test(s))?o:`${o}px`}})(),ss=(t,e,r)=>{O(r)&&Z(r)?V(()=>{ir(t,e,r())}):ir(t,e,P(r))},os=(t,e,r)=>{if(M(e))t.setAttribute("style",e);else{if(r)if(M(r))r&&(t.style.cssText="");else{r=ce.unwrap(r);for(let s in r)e&&s in e||ir(t,s,null)}if(fe(e))for(let s in e){let o=at(()=>O(e[s])?e[s]:e[ot](s));ss(t,s,o)}else for(let s in e)ss(t,s,e[s])}},yo=(t,e)=>{if(O(e)&&Z(e)){let r;V(()=>{let s=e();os(t,s,r),r=s})}else os(t,P(e))},wo=(t,e,r)=>{if(e==="children"){let s=xt("");t.insertBefore(s,null),r(t,"setChildReplacement",void 0,s)}else e==="ref"?r(t,"setRef"):e==="style"?r(t,"setStyles"):e==="class"?(Ot(t)||(t.className=""),r(t,"setClasses")):e==="dangerouslySetInnerHTML"?r(t,"setHTML"):e.charCodeAt(0)===111&&e.charCodeAt(1)===110?r(t,"setEvent",e.toLowerCase()):e.charCodeAt(0)===117&&e.charCodeAt(3)===58?r(t,"setDirective",e.slice(4)):e==="innerHTML"||e==="outerHTML"||e==="textContent"||e==="className"||(e in t&&!Ot(t)?r(t,"setProperty",e):(t.setAttribute(e,""),r(t,"setAttribute",e)))},_o=(t,e,r)=>{Jr(r)?wo(t,e,r):e==="children"?fr(t,r):e==="ref"?Oo(t,r):e==="style"?yo(t,r):e==="class"?ho(t,r):e==="dangerouslySetInnerHTML"?bo(t,r):e.charCodeAt(0)===111&&e.charCodeAt(1)===110?go(t,e.toLowerCase(),r):e.charCodeAt(0)===117&&e.charCodeAt(3)===58?Ao(t,e.slice(4),r):e==="innerHTML"||e==="outerHTML"||e==="textContent"||e==="className"||(e in t&&!Ot(t)?xo(t,e,r):uo(t,e,r))},is=(t,e)=>{for(let r in e)_o(t,r,e[r])};var Ro=(t,e,...r)=>{let{children:s,key:o,ref:n,...f}=e||{},c=r.length===1?r[0]:r.length===0?s:r;if(O(t)){let i=f;return T(c)||(i.children=c),T(n)||(i.ref=n),ie(()=>at(()=>t.call(t,i)))}else if(M(t)){let i=f,l=zr(t),m=l?Kr:Wr;return Qr(c)||(i.children=c),T(n)||(i.ref=n),ie(()=>{let a=m(t);return l&&(a.isSVG=!0),at(()=>is(a,i)),a})}else{if(qr(t))return ie(()=>t);throw new Error("Invalid component")}},Ht=Ro;function Bo({values:t,fallback:e,pooled:r,unkeyed:s,children:o}){return $e(t,o,e,{pooled:r,unkeyed:s})}var ue=Bo;var Lo=(t,e)=>{if(!e||!(e instanceof HTMLElement))throw new Error("Invalid parent node");return e.textContent="",Kt(r=>(fr(e,t),()=>{r(),e.textContent=""}))},cr=Lo;var cs=function(t,e,r,s){var o;e[0]=0;for(var n=1;n<e.length;n++){var f=e[n++],c=e[n]?(e[0]|=f?1:2,r[e[n++]]):e[++n];f===3?s[0]=c:f===4?s[1]=Object.assign(s[1]||{},c):f===5?(s[1]=s[1]||{})[e[++n]]=c:f===6?s[1][e[++n]]+=c+"":f?(o=t.apply(c,cs(t,c,r,["",null])),s.push(o),c[0]?e[0]|=2:(e[n-2]=0,e[n]=o)):s.push(c)}return s},fs=new Map;function ls(t){var e=fs.get(this);return e||(e=new Map,fs.set(this,e)),(e=cs(this,e.get(t)||(e.set(t,e=function(r){for(var s,o,n=1,f="",c="",i=[0],l=function(p){n===1&&(p||(f=f.replace(/^\s*\n\s*|\s*\n\s*$/g,"")))?i.push(0,p,f):n===3&&(p||f)?(i.push(3,p,f),n=2):n===2&&f==="..."&&p?i.push(4,p,0):n===2&&f&&!p?i.push(5,0,!0,f):n>=5&&((f||!p&&n===5)&&(i.push(n,0,f,o),n=6),p&&(i.push(n,p,0,o),n=6)),f=""},m=0;m<r.length;m++){m&&(n===1&&l(),l(m));for(var a=0;a<r[m].length;a++)s=r[m][a],n===1?s==="<"?(l(),i=[i],n=3):f+=s:n===4?f==="--"&&s===">"?(n=1,f=""):f=s+f[0]:c?s===c?c="":f+=s:s==='"'||s==="'"?c=s:s===">"?(l(),n=1):n&&(s==="="?(n=5,o=f,f=""):s==="/"&&(n<5||r[m][a+1]===">")?(l(),n===3&&(i=i[0]),n=i,(i=i[0]).push(2,0,n),n=0):s===" "||s==="	"||s===`
`||s==="\r"?(l(),n=2):f+=s),n===3&&f==="!--"&&(n=4,i=i[0])}return l(),i}(t)),e),arguments,[])).length>1?e:e[0]}var as={},Co=(t,e,...r)=>Ht(as[t]||t,e,...r),To=t=>void ke(as,t),Mo=ke(ls.bind(Co),{register:To}),pt=Mo;var ps=()=>{let t=je(0);return pt`
		<div class="page">
			<div><span style="color: red;">TODO!</span> The counter is ${t}</div>
			<button class="w96-button" onClick=${()=>t(r=>r+1)}>Click button to make counter go up</button>
		</div>
	`};var us=({extension:t})=>pt`
		<div class="item" style=${`display: flex;${t.core&&" opacity: 50%"}`}>
			<div style="display: flex; flex-direction: column;">
				<div class="bold-noaa">${t.manifest.name} <i style="opacity: 50%">${t.manifest.authors.join(", ")}</i></div>
				<div>${t.manifest.description}</div>
			</div>
		</div>
	`;var ms=()=>pt`
        <div style="display: flex; flex-direction: column; gap: 0.2rem; padding-top: 0.2rem; height: 100%;" class="w96-listbox">
            <${ue} values=${X.sort(t=>t.core?1:-1)}>${t=>pt`<${us} extension=${t} />`}</${ue}>
        </div>
    `;var No=[{name:"Settings",component:ps,isDefault:!0},{name:"Extensions",component:ms}],ds=y({patches:[{find:/{caption:"System Flags",icon:await (.{1,2}\..{1,2}\.getIconUrl)\("objects\/tools"\),onclick:\(\)=>(.{1,2}\..{1,2}\.execCmd)\("flags"\)}/,replace:(t,e,r)=>`${t},{caption:"ropeswing",icon:await ${e}("apps/settings"),onclick:()=>${r}("ctrl", ["--cpl", "royalmail"])}`},{find:"rcon:k",replace:t=>`${t},royalmail:$self.app(w96.WApplication, w96.ui.components)`}],manifest:{name:"royalmail",description:"settings frontend for ropeswing",authors:["Beef"]},core:!0,app:(t,e)=>class extends t{constructor(){super()}main=async s=>Kt(o=>{if(dr("onterminated",this,o,!0),super.main(s),document.querySelector(".royalmail-applet"))return;let n=this.createWindow({center:!0,taskbar:!1,resizable:!1,initialWidth:370,initialHeight:450,controlBoxStyle:"WS_CBX_CLOSE",bodyClass:"royalmail-applet",title:"ropeswing"},!0),f=new e.TabControl;No.forEach(i=>{let l=f.addPage(i.name,async m=>void cr(Ht(i.component),m));i.isDefault&&f.openPage(l)});let c=f.getElement();c.style.height="100%",n.getBodyContainer().appendChild(c),n.show()})}});var hs=y({patches:[{find:/.\.features\.includes\(.\.f\.hidden\)/,replace:"false"}],manifest:{name:"showhiddendrives",description:"Shows all drives in explorer",authors:["redstonekasi"]}});var As=y({patches:[{find:/run\(await .+?\((.)\)/,replace:(t,e)=>`run(await $self.getFileContent(${e})`}],manifest:{name:"treebranch",description:"ropeswing in userland",authors:["redstonekasi"]},async getFileContent(t){let e=await w96.FS.readstr(t);for(let r of X)if(r.patches)for(let s of r.patches)s.executable===t&&(e=e.replace(s.find,lr(s.replace,r.manifest.name)));return e},core:!0});var Es=y({patches:[{find:/var __webpack_exports__=__webpack_require__\(\d{4}\)/,replace:t=>`${t};$self.unpack(__webpack_require__,__webpack_modules__);`}],manifest:{name:"unbox",description:"webpack unpacker",authors:["Beef"]},unpack(t,e){window.__string_require__=r=>{for(let[s,o]of Object.entries(e)){let n=o.toString();if(r instanceof RegExp&&r.test(n)||typeof r=="string"&&n.includes(r))return t(s)}}},core:!0});var X=[Ar,Er,gr,Sr,ds,hs,As,Es];function lr(t,e){let r=`ropeswing.extensions["${e}"]`;switch(typeof t){case"string":return t.replaceAll("$self",r);case"function":return(...s)=>t(...s).replaceAll("$self",r)}}function gs(t){if(!t.textContent)throw new Error("Script doesn't have textContent, what?");console.group("[ ropeswing-patcher ]");for(let e of X)if(e.patches)for(let r of e.patches)r.executable||(t.textContent=t.textContent.replace(r.find,lr(r.replace,e.manifest.name)),console.log(`applied patch ${e.patches.indexOf(r)+1} of ${e.patches.length} from ${e.manifest.name}`));console.groupEnd()}function Ss(){console.group("[ ropeswing-postload ]");for(let t of X)t.onLoad&&(t.onLoad(),console.log(`executed onLoad of ${t.manifest.name}`));console.groupEnd()}var bs=()=>({console:Ee,utils:de,extensions:Object.fromEntries([...X].map(t=>[t.manifest.name,{...t}]))});console.group("[ ropeswing ]");console.log("in kernel ctx...");var Yo=hr("appendChild",document.head,(t,e)=>{Yo(),t[0]instanceof HTMLScriptElement||e(...t);let r=t[0];ut("[ropeswing] preboot loaded. welcome!"),ut("exposing API..."),window.ropeswing=bs(),ut("applying patches..."),gs(r),ut("booting original!"),e(...t),ut("assigning postload init event..."),w96.evt.sys.on("init-complete",Ss)});console.log("kernel done!");console.groupEnd();})();
//# sourceURL=ropeswing
